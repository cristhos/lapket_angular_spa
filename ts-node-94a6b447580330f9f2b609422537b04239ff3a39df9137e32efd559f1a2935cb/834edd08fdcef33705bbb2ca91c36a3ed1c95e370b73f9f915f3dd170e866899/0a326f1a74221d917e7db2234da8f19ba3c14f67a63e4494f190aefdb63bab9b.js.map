{"version":3,"file":"/home/lithos/Data/Lab/codash/angularSpa/src/app/user/form/login/login.form.component.ts","sources":["/home/lithos/Data/Lab/codash/angularSpa/src/app/user/form/login/login.form.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAA6D;AAE7D,0CAAyC;AACzC,2DAA0D;AAC1D,2CAA+C;AAO/C,IAAa,kBAAkB;IAM7B,4BAAoB,WAAyB,EAAS,MAAc;QAAhD,gBAAW,GAAX,WAAW,CAAc;QAAS,WAAM,GAAN,MAAM,CAAQ;QAJpE,YAAO,GAAG,KAAK,CAAC;QAChB,YAAO,GAAG,KAAK,CAAC;QAMhB,UAAK,GAAG,IAAI,2BAAc,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;QACtC,cAAS,GAAG,KAAK,CAAC;QAmClB,WAAM,GAAG,IAAI,CAAC;IAvCyD,CAAC;IAKxE,qCAAQ,GAAR;QAAA,iBAiCC;QAhCC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CACxC,UAAA,IAAI;YACF,KAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;YACpB,YAAY,CAAC,KAAK,EAAE,CAAC;YACrB,YAAY,CAAC,OAAO,CAAC,SAAS,EAAG,GAAG,CAAC,CAAC;YACtC,YAAY,CAAC,OAAO,CAAC,cAAc,EAAG,IAAI,CAAC,YAAY,CAAC,CAAC;YACzD,YAAY,CAAC,OAAO,CAAC,YAAY,EAAG,IAAI,CAAC,UAAU,CAAC,CAAC;YACrD,YAAY,CAAC,OAAO,CAAC,YAAY,EAAG,IAAI,CAAC,YAAY,CAAC,CAAC;YACvD,YAAY,CAAC,OAAO,CAAC,eAAe,EAAG,IAAI,CAAC,aAAa,CAAC,CAAC;YAE3D,KAAI,CAAC,WAAW,CAAC,UAAU,GAAG,IAAI,CAAC;YACnC,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC/B,IAAI,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,WAAW,GAAG,GAAG,CAAC;gBACjF,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACnC,CAAC;YAEF,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;QAE3B,CAAC,EACD,UAAA,KAAK;YACH,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC;YAC7B,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,KAAI,CAAC,KAAK,GAAG,IAAI,2BAAc,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,EAAC,EAAE,CAAC,CAAC;QAC1D,CAAC,EACD;YACM,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;QAC3B,CAAC,CACJ,CAAC;IAEJ,CAAC;IAGD,sBAAI,0CAAU;aAAd,cAAmB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA,CAAA,CAAC;;;OAAA;IAAA,CAAC;IAExD,yBAAC;AAAD,CAAC,AAjDD,IAiDC;AAjDY,kBAAkB;IAL9B,gBAAS,CAAC;QACT,QAAQ,EAAE,YAAY;QACtB,WAAW,EAAE,6BAA6B;KAC3C,CAAC;qCAQkC,0BAAW,EAAiB,eAAM;GANzD,kBAAkB,CAiD9B;AAjDY,gDAAkB","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { NgForm }    from '@angular/forms';\nimport { Router } from '@angular/router';\nimport {  UserService } from '../../service/user.service';\nimport {  LoginFormModel } from './login.form';\n\n@Component({\n  selector: 'login-form',\n  templateUrl: './login.form.component.html',\n})\n\nexport class LoginFormComponent {\n  user : any;\n  loading = false;\n  authent = false;\n  response ;\n\n  constructor(private userService : UserService, public router: Router) {}\n\n\n  model = new LoginFormModel(null,null);\n  submitted = false;\n  onSubmit() {\n    this.loading = true;\n    this.userService.login(this.model).subscribe(\n        data => {\n          this.response = 200;\n          localStorage.clear();\n          localStorage.setItem(\"authent\" , \"O\");\n          localStorage.setItem(\"access_token\" , data.access_token);\n          localStorage.setItem(\"expires_in\" , data.expires_in);\n          localStorage.setItem(\"token_type\" , data.access_token);\n          localStorage.setItem(\"refresh_token\" , data.refresh_token);\n\n          this.userService.isLoggedIn = true;\n          if (this.userService.isLoggedIn) {\n             let redirect = this.userService.redirectUrl ? this.userService.redirectUrl : '/';\n             this.router.navigate([redirect]);\n           }\n          \n          window.location.reload();\n          \n        },\n        error => {\n          this.response = error.status;\n          this.loading = false;\n          console.log(error);\n          this.model = new LoginFormModel(this.model.username,\"\");\n        },\n        () =>{\n              this.loading = false;\n              console.log(\"finish\")\n        }\n    );\n\n  }\n  active = true;\n\n  get diagnostic() { return JSON.stringify(this.model)};\n\n}\n"]}