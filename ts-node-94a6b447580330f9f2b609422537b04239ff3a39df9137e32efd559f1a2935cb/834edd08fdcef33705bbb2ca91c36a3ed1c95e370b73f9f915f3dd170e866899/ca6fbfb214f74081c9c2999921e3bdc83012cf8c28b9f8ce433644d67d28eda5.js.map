{"version":3,"file":"/home/lithos/Data/Lab/codash/angularSpa/src/app/user/form/resseting/change-password.form.component.ts","sources":["/home/lithos/Data/Lab/codash/angularSpa/src/app/user/form/resseting/change-password.form.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, OnDestroy} from '@angular/core';\nimport { NgForm }    from '@angular/forms';\nimport { Router,ActivatedRoute } from '@angular/router';\n\nimport {  UserService } from '../../service/user.service';\nimport {  ChangePasswordFormModel } from './change-password.form';\n\n@Component({\n  selector: 'change-form',\n  templateUrl: './change-password.form.component.html',\n})\n\nexport class ChangePasswordFormComponent implements OnInit , OnDestroy{\n  loading = false;\n  authent :boolean;\n  change : boolean;\n  sub;\n  tokenConfirmation;\n  form_completed:boolean;\n\n  public barLabel: string = \"Sécurité du mot de passe:\";\n  \n  constructor(\n        private userService : UserService,\n        public router: Router,\n        private route : ActivatedRoute\n  ){}\n\n  ngOnInit(){\n    if(localStorage.getItem('access_token')){\n      this.authent = true;\n    }else{\n      this.authent = false;\n    }\n    this.sub = this.route.params.subscribe(params => {\n       this.model.tokenConfirmation = params['tokenConfirmation'];\n    });\n    this.checkForm();\n  }\n  ngOnDestroy(){\n    if(this.sub != null) this.sub.unsubscribe();\n  }\n\n  model = new ChangePasswordFormModel(null,null,null);\n\n  onSubmit() {\n    this.loading = true;\n    let user_id = localStorage.getItem('user_id');\n    this.userService.putPassword(this.model).subscribe(\n        data => {\n          if(data.status == true){\n            this.router.navigate(['/']);\n            window.location.reload();\n          }else{\n            this.model = new ChangePasswordFormModel(this.model.password,null,this.model.tokenConfirmation);\n          }\n        },\n        error => {\n          console.log(error);\n        },\n        () =>{\n          console.log(\"finish\");\n        }\n    );\n    this.loading = false;\n  }\n\n  checkForm(){\n    if(this.model.password != null && this.model.confirmePassword != null){\n       if(this.model.confirmePassword == this.model.password){\n          this.form_completed = true;\n       }else{\n          this.form_completed = false;\n       } \n    }else{\n      this.form_completed = false\n    }\n  }\n\n  get diagnostic() { return JSON.stringify(this.model); }\n\n}\n"]}