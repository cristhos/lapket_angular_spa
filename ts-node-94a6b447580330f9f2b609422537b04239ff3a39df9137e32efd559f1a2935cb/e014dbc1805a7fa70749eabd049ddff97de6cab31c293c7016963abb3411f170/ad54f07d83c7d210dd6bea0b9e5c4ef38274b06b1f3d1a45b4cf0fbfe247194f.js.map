{"version":3,"file":"/home/lithos/Data/Lab/codash/angularSpa/src/app/deal/list/deal-conversation.component.ts","sources":["/home/lithos/Data/Lab/codash/angularSpa/src/app/deal/list/deal-conversation.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAAkD;AAClD,0CAAiD;AAEjD,gEAA8D;AAO9D,IAAa,yBAAyB;IASpC,mCAAoB,WAAyB,EAAS,KAAqB;QAAvD,gBAAW,GAAX,WAAW,CAAc;QAAS,UAAK,GAAL,KAAK,CAAgB;QAH3E,sBAAiB,GAAG,EAAE,CAAC;IAGsD,CAAC;IAE9E,4CAAQ,GAAR;QACE,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAEhC,CAAC;IAED,0DAAsB,GAAtB;QAAA,iBAyBC;QAxBE,EAAE,CAAA,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,KAAM,CAAC,CAAA,CAAC;YAC3B,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAC1D,UAAA,IAAI;gBACD,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;gBACxB,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;gBACxB,GAAG,CAAA,CAAC,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,IAAE,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC/B,EAAE,CAAA,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA,CAAC;wBAC1B,KAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;wBACrD,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;oBAC5B,CAAC;gBACH,CAAC;gBACD,KAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;YACvC,CAAC,EACD,UAAA,KAAK;gBACH,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;gBAClB,KAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;YACrC,CAAC,EACD;gBACE,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;gBACrB,KAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;YACrC,CAAC,CACF,CAAC;QACL,CAAC;IACJ,CAAC;IAED,gDAAY,GAAZ;QACI,IAAI,CAAC,sBAAsB,EAAE,CAAC;IACnC,CAAC;IACF,gCAAC;AAAD,CAAC,AAhDD,IAgDC;AAhDY,yBAAyB;IALrC,gBAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;QAC7B,WAAW,EAAE,oCAAoC;KAClD,CAAC;qCAWkC,0BAAW,EAAgB,uBAAc;GAThE,yBAAyB,CAgDrC;AAhDY,8DAAyB","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { DealService } from '../../deal/service/deal.service';\n\n@Component({\n  selector: 'deal-conversation',\n  templateUrl: './deal-conversation.component.html',\n})\n\nexport class DealConversationComponent implements OnInit{\n  deal : Object;\n  pages ;\n  page ;\n  total ;\n  dealConversation;\n  dealConversations = [];\n  conversations_loading : boolean;\n\n  constructor(private dealService : DealService,private route: ActivatedRoute){}\n\n  ngOnInit() {\n    this.page = 1;\n    this.pages = 2;\n    this.getDealMyConversations();\n    \n  }\n\n  getDealMyConversations(){\n     if(this.page <= this.pages ){\n       this.conversations_loading = true;\n        this.dealService.getMyDealConversations(this.page).subscribe(\n          data => {\n             this.total = data.total;\n             this.pages = data.pages;\n             for(let i=0; i<=data.limit; i++) {\n                if(data._embedded.items[i]){\n                  this.dealConversations.push(data._embedded.items[i]);\n                  this.page = data.page + 1;\n                }\n              }\n              this.conversations_loading = false;\n          },\n          error =>{\n            console.log(error)\n            this.conversations_loading = false;\n          } ,\n          () =>{\n            console.log(\"finish\")\n            this.conversations_loading = false;\n          } \n        );\n     }\n  }\n\n  onScrollDown () {\n      this.getDealMyConversations();\n\t} \n}\n"]}