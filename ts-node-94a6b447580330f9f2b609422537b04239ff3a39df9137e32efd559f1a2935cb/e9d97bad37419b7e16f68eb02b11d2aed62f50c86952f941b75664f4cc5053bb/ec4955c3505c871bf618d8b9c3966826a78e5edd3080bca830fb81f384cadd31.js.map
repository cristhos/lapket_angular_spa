{"version":3,"file":"/home/lithos/Data/Lab/codash/angularSpa/src/app/product/common/product-common.component.ts","sources":["/home/lithos/Data/Lab/codash/angularSpa/src/app/product/common/product-common.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, EventEmitter, OnInit, AfterViewInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { ProductService } from '../../product/service/product.service';\n\ndeclare var $: any\n\n@Component({\n  selector: 'product-common',\n  templateUrl: './product-common.component.html',\n  styleUrls : ['./product-common.component.css']\n})\n\nexport class ProductCommonComponent implements OnInit,AfterViewInit{\n  @Input()\n  product : any;\n\n  //lazy-image\n  defaultImage = '../../../assets/images/loader1.gif';\n  offset = 100;\n  product_share_link;\n\n  modalActions = new EventEmitter<string>();\n  productConversation;\n  authent : Boolean;\n\n  constructor(private productService : ProductService,\n              private router: Router\n             ){}\n\n  ngOnInit(){\n    this.authent = this.buttonGuard();\n    this.product_share_link = window.location.origin + this.router.createUrlTree(['/product',this.product.id]);\n  }\n\n  ngAfterViewInit(){\n    $('.materialboxed').materialbox();\n\n    $('.dropdown-p-'+this.product.id).dropdown({\n      belowOrigin: true, // Displays dropdown below the button\n      alignment: 'right' // Displays dropdown with edge aligned to the left of button\n     }\n   );\n        \n  }\n\n  postProductVote(product_id: number){\n\n    if(this.buttonGuard() == true){\n\n       this.product.is_voted = true;\n       const nb_vote_transit = this.product.nb_votes;\n       this.product.nb_votes = nb_vote_transit + 1;\n       \n       this.productService.postProductVote(product_id).subscribe(\n        data =>{\n          //illusion optique\n        },\n        error =>{\n          console.log(error)\n          this.product.is_voted = true;\n          this.product.nb_votes = nb_vote_transit;\n        },\n        () => console.log('finish')\n     );\n    }else{\n       this.buttonGuardRedirect();\n    }\n  }\n  removeProductVote(product_id: number)\n  {\n     if(this.buttonGuard() == true){\n      this.product.is_voted = false;\n      const nb_votes_transit = this.product.nb_votes;\n      this.product.nb_votes = nb_votes_transit - 1;\n      \n      this.productService.deleteProductVote(product_id).subscribe(\n        data => {\n          //illusion optique\n        },\n        error =>{\n          console.log(error);\n          this.product.is_voted = true;\n          this.product.nb_votes = nb_votes_transit;\n        },\n        () => console.log(\"finish\")\n     );\n     }else{\n       this.buttonGuardRedirect();\n     }\n  }\n\n  deleteProduct(product_id){\n    if(window.confirm('Etes vous sûr de supprimer ?'))\n    {\n      this.productService.removeProduct(product_id).subscribe(\n        data => {\n          this.router.navigateByUrl('/');\n        },\n        error => console.log(error),\n        () => console.log(\"finish\")\n     );\n    }\n     \n  }\n\n  expiredProduct(product_id){\n    if(window.confirm('Le stock est-il vraiment vide ?'))\n    {\n      this.productService.expiredProduct(product_id).subscribe(\n        data => {\n          this.product.is_expired = data.is_expired;\n        },\n        error => console.log(error),\n        () => console.log(\"finish\")\n      );\n    }\n  }\n  desactiveNotification(product_id : number){\n    if(window.confirm('Etes vous sur de vouloir desactiver les notifications vous pouvez ratez une nouvelle'))\n    {\n      this.productService.desactiveNotification(product_id).subscribe(\n        data => {\n            this.product.is_notify = false;\n        },\n        error => console.log(error),\n        () =>console.log(\"finish\")\n      );\n    }\n  }\n  activeNotification(product_id : number){\n    if(window.confirm('Ce produit genere des notifications a chaque nouvelle activé voulez vous activer ?'))\n    {\n      this.productService.desactiveNotification(product_id).subscribe(\n        data => {\n            this.product.is_notify = true;\n        },\n        error => console.log(error),\n        () =>console.log(\"finish\")\n     );\n    }\n  }\n\n  buttonGuard(){\n    if(localStorage.getItem(\"access_token\")){\n      return true;\n    }else{\n      return false;\n    }\n  }\n \n buttonGuardRedirect(){\n   if(window.confirm('Voulez-vous vous connecter pour effectuer cette action ?'))\n    {\n      this.router.navigateByUrl('/login');\n    }\n }\n}\n"]}