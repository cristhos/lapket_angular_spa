webpackJsonp([6],{390:function(t,i,n){"use strict";var o=this&&this.__decorate||function(t,i,n,o){var e,a=arguments.length,c=a<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,n,o);else for(var f=t.length-1;f>=0;f--)(e=t[f])&&(c=(a<3?e(c):a>3?e(i,n,c):e(i,n))||c);return a>3&&c&&Object.defineProperty(i,n,c),c},e=this&&this.__metadata||function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},a=n(1),c=n(23),f=n(26),r=n(391),s=n(392),l=n(149),p=function(){function NotificationModule(){}return NotificationModule=o([a.NgModule({imports:[c.CommonModule,l.SharedModule,f.RouterModule.forChild(r.NOTIFICATION_ROUTING)],declarations:[s.NotificationListComponent,s.NotificationCommonComponent],exports:[s.NotificationListComponent,s.NotificationCommonComponent],providers:[s.NotificationService]}),e("design:paramtypes",[])],NotificationModule)}();i.NotificationModule=p},391:function(t,i,n){"use strict";var o=n(392);i.NOTIFICATION_ROUTING=[{path:"",component:o.NotificationListComponent}]},392:function(t,i,n){"use strict";var o=n(393);i.NotificationService=o.NotificationService;var e=n(394);i.NotificationListComponent=e.NotificationListComponent;var a=n(396);i.NotificationCommonComponent=a.NotificationCommonComponent},393:function(t,i,n){"use strict";var o=this&&this.__decorate||function(t,i,n,o){var e,a=arguments.length,c=a<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,n,o);else for(var f=t.length-1;f>=0;f--)(e=t[f])&&(c=(a<3?e(c):a>3?e(i,n,c):e(i,n))||c);return a>3&&c&&Object.defineProperty(i,n,c),c},e=this&&this.__metadata||function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},a=n(1),c=n(61);n(76);var f=n(81),r=function(){function NotificationService(t,i){this.http=t,this.apiUrlService=i,this.baseUrl=this.apiUrlService.getBaseUrl(),this.baseUrl=this.baseUrl+"/api/notification"}return NotificationService.prototype.getMyNotification=function(t){return this.url=this.baseUrl+"/my/notifications.json?page="+t,this.http.get(this.url).map(function(t){return t.json()})},NotificationService.prototype.removeNotification=function(t){return this.url=this.baseUrl+"/notifications/"+t+"/remove.json",this.http.get(this.url).map(function(t){return t.json()})},NotificationService=o([a.Injectable(),e("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.Http&&c.Http)&&t||Object,"function"==typeof(i="undefined"!=typeof f.ApiUrlService&&f.ApiUrlService)&&i||Object])],NotificationService);var t,i}();i.NotificationService=r},394:function(t,i,n){"use strict";var o=this&&this.__decorate||function(t,i,n,o){var e,a=arguments.length,c=a<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,n,o);else for(var f=t.length-1;f>=0;f--)(e=t[f])&&(c=(a<3?e(c):a>3?e(i,n,c):e(i,n))||c);return a>3&&c&&Object.defineProperty(i,n,c),c},e=this&&this.__metadata||function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},a=n(1),c=n(393),f=function(){function NotificationListComponent(t){this.notificationService=t,this.notifications=[]}return NotificationListComponent.prototype.ngOnInit=function(){this.page=1,this.pages=2,this.getMyNotifications()},NotificationListComponent.prototype.getMyNotifications=function(){var t=this;this.notifications_loading=!0,this.page<=this.pages&&this.notificationService.getMyNotification(this.page).subscribe(function(i){t.pages=i.pages;for(var n=0;n<=i.limit;n++)i._embedded.items[n]&&(t.notifications.push(i._embedded.items[n]),t.page=i.page+1);t.notifications_loading=!1},function(i){console.log(i),t.notifications_loading=!1},function(){console.log("finish"),t.notifications_loading=!1})},NotificationListComponent.prototype.removeNotification=function(t){var i=this;this.notificationService.removeNotification(t.id).subscribe(function(n){for(var o=0;o<=i.notifications.length;o++)if(i.notifications[o].id==t.id){i.notifications.splice(o,1);break}},function(t){return console.log(t)},function(){return console.log("finish")})},NotificationListComponent.prototype.onScrollDown=function(){this.getMyNotifications()},NotificationListComponent=o([a.Component({selector:"notification-list",template:n(395),styles:["\n\n  "]}),e("design:paramtypes",["function"==typeof(t="undefined"!=typeof c.NotificationService&&c.NotificationService)&&t||Object])],NotificationListComponent);var t}();i.NotificationListComponent=f},395:function(t,i){t.exports='<div class="container row" >\n  <div class="col s12 m3 right">\n      <user-mini-sugestion></user-mini-sugestion>\n  </div>\n  <div class="col s12 m6 offset-m3">\n    <ul *ngIf ="notifications != null" class="collection with-header"\n                infinite-scroll [infiniteScrollDistance]="2"\n                [infiniteScrollUpDistance]="1.5"\n                [infiniteScrollThrottle]="3000"\n                (scrolled)="onScrollDown()">\n                <li class="collection-header">\n                    NOTIFICATIONS \n                </li>\n                <li  *ngFor = "let notification of notifications"  >\n                    <a class="right" (click)="removeNotification(notification)">\n                        <i class="fa fa-close"></i>\n                    </a>\n                    <a class="collection-item" [routerLink]="[\'/product\',notification.object_id ]" >\n                        <notification-common [notification]="notification" ></notification-common>\n                    </a>\n                </li>\n            <p *ngIf="page <= pages" class="center">\n                <button (click)="onScrollDown()" class="btn-flat">Suivant</button>\n            </p>   \n    </ul>\n    <div *ngIf="notifications_loading == true">\n        <loading></loading>\n    </div>\n  </div>\n</div>\n'},396:function(t,i,n){"use strict";var o=this&&this.__decorate||function(t,i,n,o){var e,a=arguments.length,c=a<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,n,o);else for(var f=t.length-1;f>=0;f--)(e=t[f])&&(c=(a<3?e(c):a>3?e(i,n,c):e(i,n))||c);return a>3&&c&&Object.defineProperty(i,n,c),c},e=this&&this.__metadata||function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},a=n(1),c=function(){function NotificationCommonComponent(){}return o([a.Input(),e("design:type",Object)],NotificationCommonComponent.prototype,"notification",void 0),NotificationCommonComponent=o([a.Component({selector:"notification-common",template:n(397),styles:["\n\n  "],changeDetection:a.ChangeDetectionStrategy.OnPush}),e("design:paramtypes",[])],NotificationCommonComponent)}();i.NotificationCommonComponent=c},397:function(t,i){t.exports='<div class="card" *ngIf="notification != null">\n    <a [routerLink]="[\'/user\',notification.author.username ]" [title]="notification.author.full_name">\n      <i *ngIf="notification.author.profile_picture == null" class="fa fa-user fa-4x avatar-profile-pict  avatar"></i>\n      <img class="avatar-profile-pict  avatar" *ngIf="notification.author.profile_picture != null" src="{{notification.author.profile_picture.web_path}}" alt="{{notification.author.profile_picture.alt}}"/>\n       <strong class="title">{{ notification.author.full_name }}</strong><em> @{{ notification.author.username }}</em>\n    </a>\n    <span *ngIf="notification.destinator.is_author == false">\n        <span *ngIf="notification.type == \'ProductVote\'"> <span class="text"> aime une publication dans laquelle vous apparaissez</span></span>\n        <span *ngIf="notification.type == \'Follower\'"> <span class="text">commence Ã  suivre vos publications </span></span>\n        <br><br><small> {{notification.published_at | amTimeAgo}}</small>\n    </span>\n    <span *ngIf="notification.destinator.is_author == true">\n        <span *ngIf="notification.type == \'ProductVote\'"> <span class="text"> aime votre publication </span></span>\n        <br><br><small> {{notification.published_at | amTimeAgo}}</small>\n    </span>\n    \n</div>'}});
//# sourceMappingURL=6.9f8e34cdbc0b332017dc.chunk.js.map